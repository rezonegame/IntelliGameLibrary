<div class="min-h-screen bg-gray-900 text-gray-100 flex">
  <!-- Sidebar -->
  <aside class="w-64 bg-gray-800 p-6 flex flex-col justify-between shadow-lg border-r border-gray-700">
    <div>
      <div class="flex items-center mb-10">
        <svg class="w-10 h-10 text-indigo-400" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 2L2 7V17L12 22L22 17V7L12 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path><path d="M2 7L12 12L22 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path><path d="M12 12V22" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg>
        <h1 class="text-2xl font-bold text-indigo-400 ml-2">智游图鉴</h1>
      </div>

      <nav class="space-y-2">
        <button (click)="setView('browser')" 
                [class]="'w-full flex items-center px-4 py-2 rounded-md transition-colors text-base ' + (currentView() === 'browser' ? 'bg-indigo-600 text-white shadow-lg' : 'hover:bg-gray-700 text-gray-300')">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3" viewBox="0 0 20 20" fill="currentColor"><path d="M5 3a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2V5a2 2 0 00-2-2H5zm0 2h10v7h-2l-1 1v-1H5V5z" /></svg>
          游戏浏览器
        </button>
        <button (click)="setView('identifier')" 
                [class]="'w-full flex items-center px-4 py-2 rounded-md transition-colors text-base ' + (currentView() === 'identifier' ? 'bg-indigo-600 text-white shadow-lg' : 'hover:bg-gray-700 text-gray-300')">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd" /></svg>
          AI 识别器
        </button>
        <button (click)="setView('workshop')" 
                [class]="'w-full flex items-center px-4 py-2 rounded-md transition-colors text-base ' + (currentView() === 'workshop' ? 'bg-indigo-600 text-white shadow-lg' : 'hover:bg-gray-700 text-gray-300')">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3" viewBox="0 0 20 20" fill="currentColor"><path d="M11 17a1 1 0 001.447.894l4-2A1 1 0 0017 15V5a1 1 0 00-1.447-.894l-4 2A1 1 0 0011 7v10zM4 17a1 1 0 001.447.894l4-2A1 1 0 0010 15V5a1 1 0 00-1.447-.894l-4 2A1 1 0 004 7v10z" /></svg>
          灵感工坊
        </button>
      </nav>
    </div>
    
    <div class="border-t border-gray-700 pt-4 space-y-3">
        <div class="px-2 text-sm text-gray-400">
            <p>API Key 状态: 
                @if(geminiService.isConfigured()) {
                  <span class="text-green-400 font-semibold">已配置</span>
                } @else {
                  <span class="text-yellow-400 font-semibold">未配置</span>
                }
            </p>
        </div>
        <button (click)="openApiKeyModal()" class="w-full text-sm text-center text-indigo-400 hover:text-indigo-300 transition-colors">
            设置 API Key
        </button>
        <div class="text-center text-xs text-gray-500 pt-2">
            <p>由 Google Gemini AI 强力驱动</p>
        </div>
    </div>
  </aside>

  <!-- Main Content -->
  <main class="flex-1 overflow-y-auto">
    @switch (currentView()) {
      @case ('browser') { <app-game-browser></app-game-browser> }
      @case ('identifier') { <app-ai-identifier></app-ai-identifier> }
      @case ('workshop') { <app-inspiration-workshop></app-inspiration-workshop> }
    }
  </main>
</div>

@if (isApiKeyModalOpen()) {
  <app-api-key-modal (close)="closeApiKeyModal()"></app-api-key-modal>
}
<app-toast-container></app-toast-container>
